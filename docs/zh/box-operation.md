# HDZero BoxPro 操作说明

本节介绍HDZero BoxPro的操作说明

## 控件

- 拨盘

- 输入按钮

- 功能按钮

<img src="/boxmedia/image9.png" id="image4">

## 视频视图和菜单视图

<img src="/boxmedia/image10.png" id="image5">

<div class="page"></div>

### 视频源

HDZero BoxPro 可以显示来自以下 4 个来源的视频：

- 内置 HDZero 数字接收器

- 内置模拟数字接收器

- AV 输入

- HDMI 输入

### HDZero 数字接收器

主菜单上的“立即扫描”选项将扫描以下频道以获取 HDZero 视频信号：

- R1-R8、 E 1、F1、F2 和 F4通道，或

- 如果选择低频段，则为 L1-L8

“立即扫描”将执行以下操作：

- 扫描以上频道，

- 如果只有一个有效信道有信号，则锁定该信道，或者

- 如果找到两个或更多频道，则让您在频道之间进行选择，或者

- 如果未检测到信号，则在 5 秒后继续扫描，或者

- 等待长按 Enter 键退出到主菜单

::: tip
注1 ：要启用低频段，请将 Source -> HDZero Band 设置为Lowband 。以下是L1-L8 的中心频率。

<table id="table4">
<tr>
<td>低频段信道</td>
<td>L1</td>
<td>L2</td>
<td>L3</td>
<td>L4</td>
<td>L5</td>
<td>L6</td>
<td>L7</td>
<td>L8</td>
</tr>
<tr>
<td>频率（MHz）</td>
<td>5362</td>
<td>5399</td>
<td>5436</td>
<td>5473</td>
<td>5510</td>
<td>5547</td>
<td>5584</td>
<td>5621</td>
</tr>
</table>
:::

::: tip
注2： HDZero 与 HDZero Nano 90 相机配合使用时，可提供最低且固定的延迟。此 Nano 90 相机仅支持 540p60 模式。当设置为 540p60 时，眼镜需要将“Source”>“HDZero BW”设置为“Narrow” 。 

所有其他模式都需要将Source > HDZero BW 设置为Wide 。
:::

## 模拟接收器

HDZero BoxPro 从 AV 输入插孔或内置模拟 RF 接收器获取模拟视频输入。

HDZero BoxPro 采用新颖的方法来处理模拟输入，从而提高了模拟视频质量：

它使用带有自适应梳状滤波器的视频解码器将 Y/C 从复合视频中分离出来；

它使用去隔行器将场转换为帧，而不是将隔行行加倍；

它使用升频器来录制和显示视频；

<img src="/boxmedia/image11.png" id="image6">

图 4. 模拟输入的信号处理路径

## 自动扫描

HDZero BoxPro 具有让眼镜在开机后启动到所需模式的选项。

HDZero:      主菜单 → 自动扫描 → 自动扫描 = 开启 |最后

                                    默认值 = HDZero

模拟：主菜单 → 自动扫描 → 默认 = 模拟

上次：主菜单 → 自动扫描 → 默认 = 上次

## 风扇管理

眼镜顶部有一个风扇，用于冷却内部组件并防止屏幕起雾。

风扇速度可设置为 1-5 级，对应从最小速度到最大速度。

侧风扇的控制方式有两种：

- 自动模式：Goggle固件会自动加速/减速

- 手动模式：可以手动设定每个风扇的转速

无论当前模式如何，如果温度传感器报告的读数过热，顶部风扇将达到最大速度。

您可以通过按住功能按钮来更改风扇转速。您可以在视频视图中监控眼镜 OSD 上的风扇转速变化，从而快速调整吹向面部和光学镜片的风量。

## 图像设置

HDZero 眼镜配备图像处理器，可在视频传输至 DVR 和显示器之前对其进行微调。它包括：

- 亮度

- 饱和度

- 对比度

- LCD亮度

::: tip
注： “亮度”是指视频处理器处理的图像亮度，“LCD亮度”是指LCD显示器的背光。
:::

## LCD 自动关闭

如果 HDZero BoxPro 在设定的时间内（1/3/5/7 分钟）未检测到任何移动或按键输入，它将关闭 LCD 显示屏以发出警报，并等待一分钟，然后关闭显示屏和 HDZero 数字接收器，并发出短促的蜂鸣声。如果眼镜检测到任何移动或按键输入，LCD 显示屏和 HDZero 接收器将恢复正常运行。您可以将等待时间设置为“从不”来禁用此功能。

强烈建议在不使用眼镜时使用上述 LCD 自动关闭功能或主菜单中的“Go Sleep”关闭 LCD。

## 录像 

HDZero BoxPro 集成了用于 HDZero 数字接收器的 DVR、模拟输入（RF 或 AV 输入）以及 HDMI 输入。以下是 DVR 选项：

- 自动录制：当 DVR 检测到当前频道上有有效的 HDZero RF 时，它将开始录制，当不再检测到信号时，它将停止录制。


- 手动录制：仅当单击 Func 按钮时，DVR 才会启动/停止。

- MP4 格式或 TS 格式：许多视频编辑应用程序都更好地支持 MP4 格式。但是，如果眼镜在录制后关闭文件之前断电，MP4 文件可能会损坏，例如眼镜电池耗尽或电源线意外拔掉。与 MP4 格式不同，TS 格式会立即将视频流保存到 DVR，即使眼镜突然断电，也不会有文件损坏的风险。

- H264/H265。DVR 录制 90fps 视频时必须使用 H264 格式（为了获得更佳画质，会以 1280x720x90 分辨率录制）。其他情况下均使用 H265 格式。

- 音频：您可以选择是否录制音频。有 3 个音频源可供录制：


    1. 内置麦克风

    2. 线路输入（来自线路输入/输出插孔），又称外部麦克风

    3. AV 输入（来自 AV 输入 Jack）

表 3：DVR 分辨率

<table id="table5">
<tr>
<td></td>
<td>输入源</td>
<td>录制分辨率</td>
<td>编码器</td>
</tr>
<tr>
<td>1</td>
<td>HDZero 60fps摄像机</td>
<td>1280x720x60帧</td>
<td>H.265</td>
</tr>
<tr>
<td>2</td>
<td>HDZero 90fps摄像机</td>
<td>1280x720x90帧</td>
<td>H.264</td>
</tr>
<tr>
<td>3</td>
<td>NTSC</td>
<td>1280x720x59.97帧/秒</td>
<td>H.265</td>
</tr>
<tr>
<td>4</td>
<td>PAL</td>
<td>1280x720x50帧</td>
<td>H.265</td>
</tr>
<tr>
<td>5</td>
<td>HDMI 输入</td>
<td>1280x720（50、60、90帧/秒）<br>1920x1080（50、60帧/秒）</td>
<td>H.264</td>
</tr>
</table>

::: warning

**当眼镜正在向 SD 卡写入数据时，突然断电可能会导致 SD 卡上的文件系统损坏。**

HDZero BoxPro 运行在 Linux 系统上，在突然断电的情况下，它无法保存最后的紧急数据位。如果 SD 文件系统损坏，DVR 将无法工作。以下是如何避免在录制过程中断电的提示：

- 自动记录模式：四轴飞行器着陆后，执行以下操作之一

    - 长按“Enter”键切换到菜单模式，然后关闭眼镜，或者

    - 先关闭四轴飞行器，等待 10 秒，然后关闭飞行器

- 手动录像模式：在关闭眼镜前，点击“Func”按钮停止DVR

- 如果插入 SD 卡时 Windows 或 Mac 报告问题，请选择“扫描并修复”。

:::

## HDMI 输入的 DVR

当源设置为 HDMI 输入时，DVR 的工作方式如下：

- BoxPro 将自动开始录制并：

- 当 HDMI 分辨率改变时重新开始录制。

- 当录音时间达到10分钟时重新开始录音。

- 当 HDMI 输入源丢失时停止录制。

- 当 SD 卡存储空间小于 100MB 或 SD 卡弹出时停止录制。

::: tip
注意：当源设置为 HDMI 输入时，没有 Goggle OSD，包括录制图标、电池状态等。
:::

## 回放

HDZero BoxPro 可以回放 DVR。

- 播放器首先会列出最近的录音。使用向上/向下拨盘选择文件，然后单击播放。

- 在控制栏上，使用向上/向下拨号来搜索视频（前进/后退 5 秒），然后单击播放/暂停

- 长按Enter键退出控制栏，再次长按Enter键退出播放器。

::: tip
1. 播放器将忽略小于 5MB 的文件。

2. 回放功能旨在快速回顾——无论是查看录像，还是寻找失踪无人机的最后时刻。请注意，它无法以全帧速率回放。

:::

## OSD

飞行眼镜支持飞控 OSD（FC OSD）和自身状态 OSD（Goggle OSD）。您可以在“录制选项”子菜单中选择是否将两个 OSD 都录制到视频流中。

点击“视频”视图下的“Enter”按钮即可显示/隐藏 Goggle OSD。Goggle OSD 项目的位置可在“OSD | 调整 OSD 元素”中更改。

飞行眼镜内置 BetaFlight、Arduino 和 iNav 的 OSD 字体。它会根据连接 HDZero 图传的飞控类型自动加载相应的字体。您还可以通过将位图文件放置在 SD 卡根目录/resource/OSD/FC 下来自定义飞控 OSD。

::: tip
注意：当源设置为 HDMI 输入时，没有 Goggle OSD，包括录制图标、电池状态等。
:::

## 调频道

通过向上/向下拨转盘，可以在视频模式下调整 HDZero 接收器输入的视频通道号。不过，可以在启动时将名为“no_dial.txt”的文件放入 SD 卡根目录来禁用此功能。

## WiFi 模块（BoxPro+ 独有） 

HDZero BoxPro+ 支持 WIFI 视频流传输到智能手机、台式机或注意本电脑（如果包含 WIFI/ESP32 模块）。多个设备可以无线连接到眼镜并同时接收视频。

WiFi 模块的行为控制完全在 WiFi 模块页面中进行。用户可以将 Goggle 配置为主机（接入点）或客户端（加入网络）。

WiFi模块页面支持“基本”和“高级”配置。

#### 基本配置：

- 启用 – 打开或关闭 WiFi 模块硬件。

- 模式 — 主机（接入点）或客户端（加入网络）。

- SSID – 用户可以根据模式单独指定主机和客户端网络名称。

- 密码 – 用户可以根据模式分别指定主机和客户端网络密码。

    > 请注意，密码至少需要 8 个字符。

- 应用设置 – 使用用户修改的设置存储并配置 WiFi 模块硬件。

<img src="/boxmedia/image12.png" id="image7">

#### 高级配置:

- DHCP – 此设置仅适用于客户端模式。

    > 请注意，WiFi 会请求使用指定的地址。最终由路由器自行查找可用地址，如果请求的地址未被使用，则将使用指定的地址。


- 地址 – 网络 IP 地址。

    > 此设置适用于主机和客户端模式。

- 网络掩码 – 网络子网掩码。

    > 此设置适用于主机和客户端模式。

- 网关 – 网络网关 IP 地址。

    > 此设置适用于主机和客户端模式。

- DNS – 域网络服务 IP 地址。

- RF 通道 – 此设置仅适用于主机模式，用户可以指定他们想要在哪个射频通道上进行通信。

<img src="/boxmedia/image13.png" id="image8">

#### 系统设置：

- Root PW – 更新眼镜的 root 密码。

    > 这适用于 SSH 和 SCP 通信。

- SSH – 启用/禁用对眼镜的访问。

    > 作为安全预防措施，默认为禁用。

<img src="/boxmedia/image14.png" id="image9">

最后，如果任一页面被修改为“基本”或“高级”，用户必须返回“基本”页面并选择“应用设置”才能配置 WiFi 模块。

为了通过智能手机或计算机与 HDZero BoxPro 建立无线视频流，用户必须遵循以下步骤：

1. WiFi 模块页面中的“基本”页面将包含与 HDZero BoxPro 建立通信所需的信息：

    a. 主机模式 – 参考 SSID 和密码字段以加入 HDZero BoxPro 无线网络。

    b. 客户端模式 – 请参阅您的无线接入点用户手册。

2. 在您的设备上安装 VLC 应用程序（或其他支持 RTSP 的类似应用程序）。

3. 打开上述应用程序，选择“打开网络流”，然后输入“基本”页面脚注提供的 RTSP URL，因为它将提供通过 VLC 应用程序建立视频流所需的 URL，如果用户未在“高级”页面中进行修改，则以下是默认 IP 地址：


    > rtsp://192.168.2.122:8554/hdzero
::: tip
注意：由于网络协议、应用程序的缓冲模式和操作系统平台，预计视频会出现延迟。
:::

## ESP32/Backpack 模块（可选） 

HDZero BoxPro 支持内置 ESP32 背包，可实现：

- 设置内置 HDZero 或模拟接收器的通道号

- 无线头部追踪

- 使用遥控器开关启动/停止 DVR

### 更新BoxPro背包固件

- 在SD卡根目录下创建文件夹ELRS

- 使用 **ExpressLRS 配置器** 为 goggle 构建固件：

    1. 切换到背包菜单

    2. 选择与广播背包相同的发行版本

    3. 选择目标 HDZero Goggles -> 内置 ESP32 背包

    4. 设置与广播背包相同的绑定短语，否则你的背包需要手动绑定

    5. 构建固件。完成后会自动弹出一个文件夹，其中包含以下 4 个文件。请将它们复制到 SD 卡上创建的上述 ELRS 文件夹中。


        √ boot_app0.bin

        √ bootloader.bin

        √ firmware.bin

        √ partitions.bin

- 将 SD 卡插入眼镜

- BoxPro 上的Flash Backpack固件：固件 -> 更新 ESP32

<img src="/boxmedia/image15.png" id="image10">         <img src="/boxmedia/image16.png" id="image11">

### 绑定BoxPro和遥控器

请将您的 ELRS 无线电发射端 (TX) 刷写至与 BoxPro 背包固件版本相同的版本。请参阅此处的 [ELRS官方设置](https://www.expresslrs.org/hardware/backpack/backpack-tx-setup/) 

如果眼镜的绑定短语与收音机不同，则首次使用时需要手动绑定。

1. BoxPro:  ELRS -> Backpack = on

2. BoxPro:  ELRS -> Bind

3. 遥控器:  ExpressLRS Lua -> Bind

几秒钟后， goggle 将显示绑定是否完成。

### 使用遥控器开关启动/停止DVR

HDZero 眼镜支持通过无线电上的开关开始/停止录制。以下是在 BoxPro 和 Radio 上设置的步骤：

1. BoxPro:  录制选项 -> 录制模式 = 手动

2. 遥控器:  ExpressLRS Lua -> Backpack -> DVR Rec = AUXn↑ | AUXn↓, 其中n是遥控器开关的辅助通道编号。


## 实时时钟（RTC）

HDZero BoxPro 配备实时时钟。初始设置时，可以通过“时钟”页面配置实时时钟 (RTC)。使用“设置时钟”功能时，该页面将同时设置系统时钟和硬件时钟。否则，当眼镜启动时，系统将默认使用用户上次执行“设置时钟”命令后设置的日期和时间。

<img src="/boxmedia/image17.png" id="image12">

预装电池最终可能会耗尽，可以用售后 CR1220 电池更换。更换电池后，您需要调用“设置时钟”功能来设置正确的时间和日期。

**请注意，对于打开眼镜安装替换电池时造成的任何损坏，用户将承担全部责任。**

